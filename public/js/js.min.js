!function(e){  function t(a){if(o[a])return o[a].exports;var n=o[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,t,o){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.ploc=t.maxCommLen=t.minCommLen=t.localCache=t.lang=t.cookie=t.waitForFinalEvent=void 0;var a=o(1),n=function(){var e={};return function(t,o,a){a||(a="Don't call this twice without a uniqueId"),e[a]&&clearTimeout(e[a]),e[a]=setTimeout(t,o)}}(),i=document.domain,r=i.lastIndexOf("."),c=i.substr(r+1),l=i.substr(0,r);l.lastIndexOf(".")!=-1&&(l=l.substr(l.lastIndexOf(".")+1)),window.onerror=function(e,t,o,n){try{if(parseInt(o)>1&&t.indexOf("uptolike")==-1&&t.indexOf("bot")==-1&&t.indexOf("yandex")==-1&&t.indexOf("leechlink")==-1&&""!=t){var i=i||-1,r="<i>"+(new Date).toString()+'</i><br><a href="'+window.location.href+'" target="_blank">'+window.location.href+"</a><br><b>id_auth</b>: "+i+"<br>"+navigator.userAgent+"<br>"+e+"<br><b>file</b>: "+t+"<b>line</b>: "+o+"<b>column</b>: "+n;$.get(a.ajax.ajaxFld+"/JsErrorHandler.php?jserror="+encodeURIComponent(r))}}catch(e){}};var u=new Date;u.setTime(u.getTime()+2592e6),u=u.toUTCString();var s={setCookie:function(e,t){document.cookie=e+"="+t+";expires="+u+";path=/;domain=."+l+"."+c},getCookie:function(e){return e=new RegExp(e+"=[^;]+","i"),document.cookie.match(e)?document.cookie.match(e)[0].split("=")[1]:null}},p=s.getCookie("lang"),d={timeout:1e4,data:{},remove:function(e){delete d.data[e]},exist:function(e){return!!d.data[e]&&(new Date).getTime()-d.data[e]._<d.timeout},get:function(e){return d.data[e].data},set:function(e,t,o){d.remove(e),d.data[e]={_:(new Date).getTime(),data:t},$.isFunction(o)&&o(t)}};$.ajaxPrefilter(function(e,t){e.cache&&!function(){var o=t.complete||$.noop,a=t.url;e.cache=!1,e.beforeSend=function(){return!d.exist(a)||(o(d.get(a)),!1)},e.complete=function(e){d.set(a,e,o)}}()});var m={info:function(e){"undefined"!=typeof console&&console.info(e)},dir:function(e){"undefined"!=typeof console&&console.dir(e)},table:function(e){"undefined"!=typeof console&&"undefined"!=typeof console.table&&console.table(e)},trim:function(e){var t=e.replace(/^ */,"");return t.replace(/ *$/,"")},floor:function(e,t){return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)},winW:function(){return $(window).width()},winH:function(){return $(window).height()},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},getURLParam:function(e,t){return decodeURIComponent((t.match(new RegExp("[?|&]"+e+"=(.+?)(&|$)"))||[,null])[1])},endsWith:function(e,t){return e.indexOf(t,e.length-t.length)!==-1},isIE:function(){return/MSIE (\d+\.\d+);/.test(navigator.userAgent)},getIEVer:function(){var e=9;return/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(e=Number(RegExp.$1)),e},getBrowserLang:function(){var e="ru";return"undefined"!=typeof navigator.language?e=navigator.language:"undefined"!=typeof navigator.browserLanguage?e=navigator.browserLanguage:"undefined"!=typeof navigator.systemLanguage?e=navigator.systemLanguage:"undefined"!=typeof navigator.userLanguage&&(e=navigator.userLanguage),e},isIE7:function(){return!!(m.isIE()&&m.getIEVer()<=7)},isIE8:function(){return!(!m.isIE()||8!=m.getIEVer())},rotateVal:function(e,t){if(e.length&&("int"==t||"float"==t)){var o=e.text();if(!(parseFloat(o)<=0)){var a="int"==t?parseInt(o):parseFloat(o),n=1;"int"==t&&a>10&&(n=a/10),"float"==t&&a>.1&&(n=a/10);var i=0,r=setInterval(function(){i<a?("int"==t?e.text(parseInt(i)):e.text(m.floor(i,2).toFixed(2)),i+=n):(e.text(o).addClass("animated bounceIn"),clearInterval(r))},100)}}},postForm:function(e,t,o){o=o||"post";var a=document.createElement("form");a.setAttribute("method",o),a.setAttribute("action",e);for(var n in t)if(t.hasOwnProperty(n)){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",n),i.setAttribute("value",t[n]),a.appendChild(i)}document.body.appendChild(a),a.submit()},handleHistory:function(e,t){var o=location.pathname.substr(0,location.pathname.lastIndexOf("/"));history.pushState&&history.replaceState&&!function(){$(document).on("click",e,function(e){"undefined"!==$(this)[0].id&&("prevLnkKey"==$(this)[0].id?s.setCookie("nav_dir","prev"):"nextLnkKey"==$(this)[0].id&&s.setCookie("nav_dir","next"));var n=this.href;n!=location.href&&(n=n.substr(n.lastIndexOf("/")),window.history.pushState(null,"",o+n),a.ajax.handelAjax(o+t+n)),e.preventDefault()});var n="state"in window.history,i=location.href;$(window).bind("popstate",function(){var e=!n&&location.href==i;if(n=!0,!e){var r=location.href;r=r.substr(r.lastIndexOf("/")),a.ajax.handelAjax(o+t+r)}})}()},stopRightClick:function(e){"ru"!=c&&"by"!=c&&(e.bind("mousedown",function(e){return e.stopPropagation?e.stopPropagation():e.preventDefault?e.preventDefault():e.returnValue=!1,!1}),e.bind("contextmenu",function(e){return e.stopPropagation?e.stopPropagation():e.preventDefault?e.preventDefault():e.returnValue=!1,!1}))}},f=5,h=3e4,g={by:{already_rec_note_loc:"Рекомендация<br />принята",be_constructive_loc:"Текст сообщения должен содержать хотя бы "+f+" букв",max_comm_len_loc:"Сообщение должно содержать не более "+h+" символов",really_do_home_album_loc:"Вы действительно считаете, что эта работа\nне должна присутствовать в галерее?",crop_var_loc:"Вариант кадрирования",loc:""},com:{already_rec_note_loc:"Recommendation<br />is received",be_constructive_loc:"Comment should contain at least "+f+" characters",max_comm_len_loc:"Comment should contain up to "+h+" characters",really_do_home_album_loc:"Do you really want that this work will be deleted from the gallery?",crop_var_loc:"Crop",loc:""},de:{already_rec_note_loc:"Die Empfehlung<br />wurde gezählt",be_constructive_loc:"Ihre Anmerkung soll mindestens "+f+" Buchstaben enthalten",max_comm_len_loc:"Eine Anmerkung darf bis zu "+h+" Zeichen enthalten",really_do_home_album_loc:"Möchten Sie wirklich, dass dieses Bild von der Bildergalerie entfernt wird?",crop_var_loc:"Crop",loc:""},ru:{already_rec_note_loc:"Рекомендация<br />принята",be_constructive_loc:"Текст сообщения должен содержать хотя бы "+f+" букв",max_comm_len_loc:"Сообщение должно содержать не более "+h+" символов",really_do_home_album_loc:"Вы действительно считаете, что эта работа\nне должна присутствовать в галерее?",crop_var_loc:"Вариант кадрирования",loc:""}};"by"==p?t.ploc=g=g.by:"com"==p?t.ploc=g=g.com:"de"==p?t.ploc=g=g.de:t.ploc=g=g.ru,t.waitForFinalEvent=n,t.cookie=s,t.lang=p,t.localCache=d,t.minCommLen=f,t.maxCommLen=h,t.ploc=g,t.utils=m},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;var a=o(0),n=o(2),i={ajaxFld:"/ajax",loader:'<img src="/css/black/loader_gray.new.gif" alt="">',handelAjax:function(e){function t(t){t.responseJSON=t.responseJSON||!1,t.responseJSON&&!jQuery.isEmptyObject(t.responseJSON)?(t=t.responseJSON,t.ajaxBody=t.ajaxBody||"",t.title=t.title||"",t.debug=t.debug||"",t.canonicalUrl=t.canonicalUrl||"",t.hrefPrev=t.hrefPrev.replace(/&amp;/g,"&")||"",t.hrefNext=t.hrefNext.replace(/&amp;/g,"&")||"",o.html(t.ajaxBody),n.app.isFirstClick&&a.utils.isMobile()||o.addClass("animated fadeIn"),n.app.isFirstClick=!1,""!=t.title&&(document.title=t.title),$("link[rel='canonical']").attr("href",t.canonicalUrl),$("#canonicalUrl").attr("href",t.canonicalUrl),$(".prevLnk").attr("href",t.hrefPrev),$(".nextLnk").attr("href",t.hrefNext),$("#debug").html(t.debug),n.app.updateMainImg(),l||i.getViews(),"function"==typeof ga&&ga("send","pageview",{page:e.replace(/\/ajax/,""),title:document.title})):t.responseText.match(/Location: /)&&(window.location.href=t.responseText.replace(/Location: /,"")),$("#ajax_overlay").remove(),n.app.isInZoom=!1}$("html, body").animate({scrollTop:0},300),$("#submenu").slideUp(),n.app.removeCrop();var o=$("#ajaxBody"),r=o.offset(),c={w:o.width(),h:o.height()};$("#ajax_overlay").length||(o.removeClass("animated fadeIn"),$('<div id="ajax_overlay"></div>').css({left:r.left+"px",top:r.top+"px",width:c.w+"px",height:c.h+"px"}).appendTo("body"),setTimeout(function(){$("#ajax_overlay").addClass("loader")},500));var l=!1;a.localCache.exist(e)&&(l=!0),$.ajax({url:e,cache:!0,complete:t})},postComm:function(){var e=$("#mainImage").data("idPhoto"),t=$("#commText"),o=a.utils.trim(t.val());o.length<a.minCommLen?(alert(a.ploc.be_constructive_loc),t.focus()):o.length>a.maxCommLen?(alert(a.ploc.max_comm_len_loc),t.focus()):!function(){var a=$("#loaderComm");a.show(),$.post("/ajax/post_comm.php",{id:e,comm_text:o,type:"work",id_auth_answer:n.app.id_auth_answer,id_comm_parent:n.app.id_comm_parent},function(e){e.cnt=e.cnt||1;var i=$("#submenu");$("#commTbl").find("tbody").append('<tr><td class="commAuth"><a href="'+i.data("authUrl")+'"><img src="'+i.data("authAvatar")+'"></a></td><td class="commTextTd"><div class="commText"><a href="'+i.data("authUrl")+'">'+i.data("authName")+"</a><br>"+o+"</div></td></tr>"),t.val(""),n.app.id_auth_answer=0,n.app.id_comm_parent=0,a.hide()},"json")}()},getRecs:function(){var e=$("#mainImage").data("idPhoto");$("#addRecAjax").html('<span class="recNote">'+a.ploc.already_rec_note_loc+"</span>"),$("#homeAlbumAjax").hide();var t=$("#phRating"),o=t.text();t.text();var n=!1;setTimeout(function(){n||t.html(i.loader)},500),$.get("/ajax/get_recs.php",{id_photo:e},function(e){n=!0,t.text(a.utils.floor(parseFloat(o)+parseFloat(e),2)).addClass("animated bounceIn")})},getFineart:function(){var e=$("#mainImage").data("idPhoto"),t=$("#fineartBtn").data("fineart");$("#fineartAjax").text(""),$.get("/ajax/get_fineart.php",{id:e,fineart:t},function(e){})},getHomeAlbum:function(){var e=$("#mainImage").data("idPhoto");$("#homeAlbumAjax").hide(),$.get("/ajax/get_home_album.php",{id_photo:e,is_vote:1},function(e){})},getViews:function(){var e=$("#mainImage");e.length&&$.get("/ajax/get_views.php",{id:e.data("idPhoto")},function(e){})},getFollow:function(e){var t=$("#ajaxHeader").data("idAuthPhoto"),o=$("#followBtnBlk"),a=!1;setTimeout(function(){a||o.html(i.loader)},500),$.get("/ajax/get_follow.php",{id:t,act:e,type:"auth"},function(e){a=!0,o.html(e+"<br>&nbsp;")})}};t.ajax=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;var a=o(0),n={winW:$(window).width(),winH:$(window).height(),isCrop:!1,cropX:0,cropY:0,cropW:0,cropH:0,viewedNudes:[],isFirstClick:!0,isInZoom:!1,clickDelay:200,clicksCnt:0,clickTimer:0,isCommentFocus:!1,id_auth_answer:0,id_comm_parent:0,toggleCrop:function(){if(n.resetImgZoom(),n.cropW>0&&n.cropH>0){if(n.isCrop)$(".crop_overlay_dark").remove(),$(".crop_overlay_light").remove();else{$("html, body").animate({scrollTop:0},300);var e=$("#mainImage");if("nudePreview"==e.attr("class"))"undefined"==typeof e.data("isAllowedNude")&&n.showNude();else{var t=e.offset(),o={w:e.width(),h:e.height()},a=o.w/parseInt(e.data("phMainW")),i=o.h/parseInt(e.data("phMainH"));$('<div class="crop_overlay_dark"></div>').css({left:t.left+"px",top:t.top+"px",width:o.w+.1+"px",height:o.h+.1+"px"}).appendTo("body"),$('<div class="crop_overlay_light" style="background: transparent url('+e.attr("src")+") no-repeat -"+n.cropX*a+"px -"+n.cropY*i+"px; background-size: "+o.w+"px "+o.h+'px;"></div>').css({left:t.left+n.cropX*a+"px",top:t.top+n.cropY*i+"px",width:n.cropW*a+"px",height:n.cropH*i+"px"}).appendTo("body")}}n.isCrop=!n.isCrop}},removeCrop:function(){$(".crop_overlay_dark").remove(),$(".crop_overlay_light").remove(),n.isCrop=!1},showNude:function(){var e=$("#mainImage");return!!e.length&&(e.removeClass("nudePreview").addClass("animated fadeIn"),e.attr("src",e.data("phPath")+e.data("idPhoto")+"_mobile.jpg").css({width:"auto",height:"auto"}),n.updateMainImg(),n.viewedNudes.push(e.data("idPhoto")),!0)},updateMainImg:function(){var e=$("#mainImage"),t=$("#nudeWarn");if(e.length){if("nudePreview"==e.attr("class"))for(var o=0;o<n.viewedNudes.length;o++)if(e.data("idPhoto")==n.viewedNudes[o]){e.removeClass("nudePreview"),e.attr("src",e.data("phPath")+e.data("idPhoto")+"_mobile.jpg").css({width:"auto",height:"auto"});break}var i=e.attr("src"),r="main";if("undefined"!=typeof e.data("isAllowedNude")&&(r="council"),n.winW>=420){var c=$("#mobileImage");c.attr("src",i.replace(/mobile/g,r)),c.waitForImages(function(){e.attr("src",i.replace(/mobile/g,r))});var l=e.data("phMainW"),u=e.data("phMainH");l>n.winW&&(u=u/l*n.winW,l=n.winW),e.css({width:l+"px",height:u+"px"}),t.css({"margin-top":+(u/2-30)+"px"})}else e.attr("src",i.replace(new RegExp(r,"g"),"mobile"));n.resetImgZoom(),n.fixCommText(),a.utils.stopRightClick(e)}},resetImgZoom:function(){if(!n.isInZoom)return!0;var e=$("#mainImage");n.isInZoom=!1,e.panzoom("reset",{duration:500}),setTimeout(function(){e.panzoom("destroy")},500)},handleImgZoom:function(){if(!a.utils.isTouch()||n.isCrop)return!0;if(n.isInZoom)n.resetImgZoom();else{var e=$("#mainImage");n.winW<420&&e.attr("src",e.attr("src").replace(/mobile/g,"main"));var t=e.data("phMainW")/e.width();if(t<=1)return!0;n.isInZoom=!0,e.panzoom({minScale:t,maxScale:t,duration:500,contain:"invert"}),e.panzoom("zoom")}},submitLogin:function(){var e=a.utils.trim($("#auth_login").val()),t=a.utils.trim($("#auth_pass").val());if(""!=e&&""!=t){var o=location.href.replace(/&wrn_login=1/,"");""!=window.location.search||a.utils.endsWith(o,"?")||(o+="?"),a.utils.postForm(o,{auth_login:encodeURI(e),auth_pass:encodeURI(t)})}},getCommTextVal:function(e){var t=e.val();return a.utils.trim(t)&&(t+="\n"),t},updateTextareaHeight:function(e){var t=100,o=parseInt(e.css("line-height"),10),a=Math.floor(e.prop("scrollHeight")/o),n=a*o;n>t?e.css({height:n+"px"}):e.css({height:t+"px"})},focusCommText:function(e,t){n.isCommentFocus=!0,e.focus().val("").val(t)},emoticon:function(e,t){n.id_auth_answer=e,n.id_comm_parent=t;var o=$("#commText"),a=n.getCommTextVal(o);a+="[b]"+$("#authName"+t).text()+"[/b], ",n.focusCommText(o,a),n.updateTextareaHeight(o)},setAnswer:function(e,t){n.id_auth_answer=e,n.id_comm_parent=t;var o=new RegExp(a.ploc.crop_var_loc),i=$("#commText"+t).html();i=i.replace(/<div class="commQuote">[\s\S]+<\/div>/g,""),i=i.replace(/<br>/g,"").replace(/&nbsp;/g,""),i=i.replace(/<strong>/g,"[b]").replace(/<\/strong>/g,"[/b]").replace(/<u>/g,"[u]").replace(/<\/u>/g,"[/u]").replace(/<i>/g,"[i]").replace(/<\/i>/g,"[/i]"),i=i.replace(o,"").replace(/<\/?[^>]+(>|$)/g,""),i=i.replace(/^\n+/,"").replace(/\n+$/,""),i="[quote]"+a.utils.trim(i)+"[/quote]\n\n[b]"+$("#authName"+t).text()+"[/b], ";var r=$("#commText"),c=n.getCommTextVal(r);c+=i,n.focusCommText(r,c),n.updateTextareaHeight(r)},fixCommText:function(){n.winW<400&&$(".commText").css({width:n.winW-60+"px"})},fixLayout:function(){n.winW=a.utils.winW(),n.winH=a.utils.winH(),a.utils.info("winW: "+n.winW+", winH: "+n.winH),n.updateMainImg(),n.removeCrop()}};t.app=n},function(e,t,o){"use strict";o(5)},function(e,t,o){"use strict";var a=o(0),n=o(1),i=o(2);$(function(){a.utils.handleHistory('a[rel="prev"], a[rel="next"], a[rel="author"]',n.ajax.ajaxFld),$(window).resize(function(){(0,a.waitForFinalEvent)(function(){i.app.fixLayout()},500,"delayed_resize")}),$(document).ready(function(){}),$(document).on("keyup","#auth_login, #auth_pass",function(e){13==e.keyCode&&(i.app.submitLogin(),e.preventDefault())}).on("click","#loginBtn",function(e){i.app.submitLogin(),e.preventDefault()}).on("click","#menuLnk",function(){i.app.removeCrop(),$("#submenu").slideToggle(200,function(){})}).on("click",".crop_overlay_dark, .crop_overlay_light",function(){i.app.removeCrop()}).on("click","#addRecBtn",function(e){n.ajax.getRecs(),e.preventDefault()}).on("click","#fineartBtn",function(e){n.ajax.getFineart(),e.preventDefault()}).on("click","#homeAlbumBtn",function(e){confirm(a.ploc.really_do_home_album_loc)&&n.ajax.getHomeAlbum(),e.preventDefault()}).on("click","#addCommBtn",function(e){n.ajax.postComm(),e.preventDefault()}).on("click","#followBtn, #unfollowBtn",function(e){"followBtn"==$(this).attr("id")?n.ajax.getFollow(1):n.ajax.getFollow(0),e.preventDefault()}).on("click",".nudePreview",function(e){"undefined"==typeof $(this).data("isAllowedNude")&&i.app.showNude()&&(e.stopPropagation(),e.preventDefault())}).on("click",".authNameAnswer",function(e){i.app.emoticon($(this).data("idAuth"),$(this).data("idComm")),e.stopPropagation(),e.preventDefault()}).on("click",".commAnswer",function(e){i.app.setAnswer($(this).data("idAuth"),$(this).data("idComm")),e.stopPropagation(),e.preventDefault()}).on("click",".cropClick",function(e){var t=$(this).data("cropCoordinates").split(";");4==t.length&&(i.app.cropX=t[0],i.app.cropY=t[1],i.app.cropW=t[2],i.app.cropH=t[3],i.app.toggleCrop()),e.stopPropagation(),e.preventDefault()}).on("click","#canonicalUrl",function(){a.cookie.setCookie("allowFullVer",1)}).on("doubletap","#mainImageA",function(e){i.app.handleImgZoom(),e.preventDefault()}).on("dblclick","#mainImageA",function(e){e.preventDefault()}).on("click","#mainImageA",function(e){i.app.clicksCnt++,1===i.app.clicksCnt?i.app.clickTimer=setTimeout(function(){i.app.clicksCnt=0,i.app.isInZoom||$("#nextLnkKey").trigger("click"),e.preventDefault()},i.app.clickDelay):(clearTimeout(i.app.clickTimer),i.app.handleImgZoom(),e.preventDefault(),i.app.clicksCnt=0)}).on("click","#facebookBtn",function(){$(this).attr("disabled",!0)}).on("blur","#commText",function(){i.app.isCommentFocus=!1}).on("focus","#commText",function(){i.app.isCommentFocus=!0,i.app.updateTextareaHeight($(this))}).on("keyup","#commText",function(){i.app.updateTextareaHeight($(this))}).on("keyup",function(e){i.app.isCommentFocus||(39==e.keyCode?$("#nextLnkKey").click():37==e.keyCode&&$("#prevLnkKey").click(),e.preventDefault())}).on("click","a.showImgFromLnk",function(e){$(this).html('<img src="'+$(this).attr("href")+'">'),e.preventDefault()}),setTimeout(function(){$("#resultMsg").slideUp()},3e3),i.app.updateMainImg(),n.ajax.getViews(),a.utils.rotateVal($("#authRating"),"float")})},function(e,t){},function(e,t,o){o(4),e.exports=o(3)}]);
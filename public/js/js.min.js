!function(e){function t(o){if(a[o])return a[o].exports;var n=a[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,t,a){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.ploc=t.localCache=t.lang=t.cookie=t.waitForFinalEvent=void 0;var o=a(1),n=function(){var e={};return function(t,a,o){o||(o="Don't call this twice without a uniqueId"),e[o]&&clearTimeout(e[o]),e[o]=setTimeout(t,a)}}(),i=document.domain,r=i.lastIndexOf("."),l=i.substr(r+1),c=i.substr(0,r);c.lastIndexOf(".")!=-1&&(c=c.substr(c.lastIndexOf(".")+1)),window.onerror=function(e,t,a,n){try{if(parseInt(a)>1&&t.indexOf("uptolike")==-1&&t.indexOf("bot")==-1&&t.indexOf("yandex")==-1&&t.indexOf("leechlink")==-1&&""!=t){if("undefined"==typeof i)var i=-1;var r="<i>"+(new Date).toString()+'</i><br><a href="'+window.location.href+'" target="_blank">'+window.location.href+"</a><br><b>id_auth</b>: "+i+"<br>"+navigator.userAgent+"<br>"+e+"<br><b>file</b>: "+t+" <b>line</b>: "+a+" <b>column</b>: "+n;$.get(o.ajax.ajaxFld+"/JsErrorHandler.php?jserror="+encodeURIComponent(r))}}catch(e){}};var u=new Date;u.setTime(u.getTime()+2592e6),u=u.toUTCString();var s={setCookie:function(e,t){document.cookie=e+"="+t+";expires="+u+";path=/;domain=."+c+"."+l},getCookie:function(e){return e=new RegExp(e+"=[^;]+","i"),document.cookie.match(e)?document.cookie.match(e)[0].split("=")[1]:null}},d=s.getCookie("lang"),p={timeout:1e4,data:{},remove:function(e){delete p.data[e]},exist:function(e){return!!p.data[e]&&(new Date).getTime()-p.data[e]._<p.timeout},get:function(e){return p.data[e].data},set:function(e,t,a){p.remove(e),p.data[e]={_:(new Date).getTime(),data:t},$.isFunction(a)&&a(t)}};$.ajaxPrefilter(function(e,t){if(e.cache){var a=t.complete||$.noop,o=t.url;e.cache=!1,e.beforeSend=function(){return!p.exist(o)||(a(p.get(o)),!1)},e.complete=function(e){p.set(o,e,a)}}});var f={info:function(e){"undefined"!=typeof console&&console.info(e)},dir:function(e){"undefined"!=typeof console&&console.dir(e)},table:function(e){"undefined"!=typeof console&&"undefined"!=typeof console.table&&console.table(e)},trim:function(e){var t=e.replace(/^ */,"");return t.replace(/ *$/,"")},floor:function(e,t){return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)},winW:function(){return $(window).width()},winH:function(){return $(window).height()},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isTouch:function(){return"ontouchstart"in document.documentElement},getURLParam:function(e,t){return decodeURIComponent((t.match(new RegExp("[?|&]"+e+"=(.+?)(&|$)"))||[,null])[1])},endsWith:function(e,t){return e.indexOf(t,e.length-t.length)!==-1},isIE:function(){return/MSIE (\d+\.\d+);/.test(navigator.userAgent)},getIEVer:function(){var e=9;return/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(e=Number(RegExp.$1)),e},getBrowserLang:function(){var e="ru";return"undefined"!=typeof navigator.language?e=navigator.language:"undefined"!=typeof navigator.browserLanguage?e=navigator.browserLanguage:"undefined"!=typeof navigator.systemLanguage?e=navigator.systemLanguage:"undefined"!=typeof navigator.userLanguage&&(e=navigator.userLanguage),e},isIE7:function(){return!!(f.isIE()&&f.getIEVer()<=7)},isIE8:function(){return!(!f.isIE()||8!=f.getIEVer())},rotateVal:function(e,t){if(e.length&&("int"==t||"float"==t)){var a=e.text();if(!(parseFloat(a)<=0)){var o="int"==t?parseInt(a):parseFloat(a),n=1;"int"==t&&o>10&&(n=o/10),"float"==t&&o>.1&&(n=o/10);var i=0,r=setInterval(function(){i<o?("int"==t?e.text(parseInt(i)):e.text(f.floor(i,2).toFixed(2)),i+=n):(e.text(a).addClass("animated bounceIn"),clearInterval(r))},100)}}},handleHistory:function(e,t){var a=location.pathname.substr(0,location.pathname.lastIndexOf("/"));history.pushState&&history.replaceState&&!function(){$(document).on("click",e,function(e){"undefined"!==$(this)[0].id&&("prevLnkKey"==$(this)[0].id?s.setCookie("nav_dir","prev"):"nextLnkKey"==$(this)[0].id&&s.setCookie("nav_dir","next"));var n=this.href;n!=location.href&&(n=n.substr(n.lastIndexOf("/")),window.history.pushState(null,"",a+n),o.ajax.handelAjax(a+t+n)),e.preventDefault()});var n="state"in window.history,i=location.href;$(window).bind("popstate",function(){var e=!n&&location.href==i;if(n=!0,!e){var r=location.href;r=r.substr(r.lastIndexOf("/")),o.ajax.handelAjax(a+t+r)}})}()}},m=5,h=3e4,g={by:{already_rec_note_loc:"Спасибо, ваша<br />рекомендация принята",be_constructive_loc:"Текст сообщения должен содержать хотя бы "+m+" букв",max_comm_len_loc:"Сообщение должно содержать не более "+h+" символов",really_do_home_album_loc:"Вы действительно считаете, что эта работа\nне должна присутствовать в галерее?",loc:""},en:{already_rec_note_loc:"Thanks, your<br />recommendation is received",be_constructive_loc:"Please write some words",max_comm_len_loc:"Max "+h+" characters",really_do_home_album_loc:"Do you really want that this work will be deleted from the gallery?",loc:""},de:{already_rec_note_loc:"Danke, Ihre Empfehlung<br />wurde gezählt",be_constructive_loc:"Ihre Anmerkung soll mindestens "+m+" Buchstaben enthalten",max_comm_len_loc:"Eine Anmerkung darf bis zu "+h+" Zeichen enthalten",really_do_home_album_loc:"Möchten Sie wirklich, dass dieses Bild von der Bildergalerie entfernt wird?",loc:""},ru:{already_rec_note_loc:"Рекомендация<br />принята",be_constructive_loc:"Текст сообщения должен содержать хотя бы "+m+" букв",max_comm_len_loc:"Сообщение должно содержать не более "+h+" символов",really_do_home_album_loc:"Вы действительно считаете, что эта работа\nне должна присутствовать в галерее?",loc:""}};"by"==d?t.ploc=g=g.by:"en"==d?t.ploc=g=g.en:"de"==d?t.ploc=g=g.de:t.ploc=g=g.ru,t.waitForFinalEvent=n,t.cookie=s,t.lang=d,t.localCache=p,t.ploc=g,t.utils=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;var o=a(0),n=a(2),i={ajaxFld:"/ajax",loader:'<img src="/css/black/loader_gray.new.gif" alt="">',handelAjax:function(e){function t(t){t.responseJSON=t.responseJSON||!1,t.responseJSON&&!jQuery.isEmptyObject(t.responseJSON)?(t=t.responseJSON,t.ajaxBody=t.ajaxBody||"",t.title=t.title||"",t.debug=t.debug||"",t.canonicalUrl=t.canonicalUrl||"",t.hrefPrev=t.hrefPrev.replace(/&amp;/g,"&")||"",t.hrefNext=t.hrefNext.replace(/&amp;/g,"&")||"",a.html(t.ajaxBody),n.app.isFirstClick||a.addClass("animated fadeIn"),n.app.isFirstClick=!1,""!=t.title&&(document.title=t.title),$("link[rel='canonical']").attr("href",t.canonicalUrl),$("#canonicalUrl").attr("href",t.canonicalUrl),$(".prevLnk").attr("href",t.hrefPrev),$(".nextLnk").attr("href",t.hrefNext),$("#debug").html(t.debug),n.app.updateMainImg(),c||i.getViews(),"function"==typeof ga&&ga("send","pageview",{page:e.replace(/\/ajax/,""),title:document.title})):t.responseText.match(/Location: /)&&(window.location.href=t.responseText.replace(/Location: /,"")),$("#ajax_overlay").remove(),a.waitForImages(function(){a.css({height:"auto"})}),n.app.isInZoom=!1}$("html, body").animate({scrollTop:0},300),$("#submenu").slideUp(),n.app.removeCrop();var a=$("#ajaxBody"),r=a.offset(),l={w:a.width(),h:a.height()};$("#ajax_overlay").length||(a.css({height:l.h+"px"}),a.removeClass("animated fadeIn"),$('<div id="ajax_overlay"></div>').css({left:r.left+"px",top:r.top+"px",width:l.w+"px",height:l.h+"px"}).appendTo("body"),setTimeout(function(){$("#ajax_overlay").addClass("loader")},500));var c=!1;o.localCache.exist(e)&&(c=!0),$.ajax({url:e,cache:!0,complete:t})},postComm:function(){var e=$("#mainImage").data("idPhoto"),t=$("#commText"),a=o.utils.trim(t.val());a.length<minCommLen?(alert(o.ploc.be_constructive_loc),t.focus()):a.length>3e4?(alert(o.ploc.max_comm_len_loc),t.focus()):!function(){var o=$("#loaderComm");o.show(),$.post("/ajax/post_comm.php",{id:e,comm_text:a,type:"work",id_auth_answer:0,id_comm_parent:0},function(e){e.cnt=e.cnt||1;var n=$("#submenu");$("#commTbl").find("tbody").append('<tr><td class="commAuth"><a href="'+n.data("authUrl")+'"><img src="'+n.data("authAvatar")+'"></a></td><td class="commTextTd"><div class="commText"><a href="'+n.data("authUrl")+'">'+n.data("authName")+"</a><br>"+a+"</div></td></tr>"),t.val(""),o.hide()},"json")}()},getRecs:function(){var e=$("#mainImage").data("idPhoto");$("#addRecAjax").html('<span class="recNote">'+o.ploc.already_rec_note_loc+"</span>"),$("#homeAlbumAjax").hide();var t=$("#phRating"),a=t.text();t.text();var n=!1;setTimeout(function(){n||t.html(i.loader)},500),$.get("/ajax/get_recs.php",{id_photo:e},function(e){n=!0,t.text(o.utils.floor(parseFloat(a)+parseFloat(e),2)).addClass("animated bounceIn")})},getFineart:function(){var e=$("#mainImage").data("idPhoto"),t=$("#fineartBtn").data("fineart");$("#fineartAjax").text(""),$.get("/ajax/get_fineart.php",{id:e,fineart:t},function(e){})},getHomeAlbum:function(){var e=$("#mainImage").data("idPhoto");$("#homeAlbumAjax").hide(),$.get("/ajax/get_home_album.php",{id_photo:e,is_vote:1},function(e){})},getViews:function(){var e=$("#mainImage");e.length&&$.get("/ajax/get_views.php",{id:e.data("idPhoto")},function(e){})},getFollow:function(e){var t=$("#ajaxHeader").data("idAuthPhoto"),a=$("#followBtnBlk"),o=!1;setTimeout(function(){o||a.html(i.loader)},500),$.get("/ajax/get_follow.php",{id:t,act:e,type:"auth"},function(e){o=!0,a.html(e+"<br>&nbsp;")})}};t.ajax=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.app=void 0;var o=a(0),n={winW:$(window).width(),winH:$(window).height(),isCrop:!1,cropX:0,cropY:0,cropW:0,cropH:0,viewedNudes:[],isFirstClick:!0,isInZoom:!1,clickDelay:200,clicksCnt:0,clickTimer:0,toggleCrop:function(){if(n.resetImgZoom(),n.cropW>0&&n.cropH>0){if(n.isCrop)$(".crop_overlay_dark").remove(),$(".crop_overlay_light").remove();else{$("html, body").animate({scrollTop:0},300);var e=$("#mainImage");if("nudePreview"==e.attr("class"))n.showNude(),n.isCrop=!n.isCrop;else{var t=e.offset(),a={w:e.width(),h:e.height()},o=a.w/parseInt(e.data("phMainW")),i=a.h/parseInt(e.data("phMainH"));$('<div class="crop_overlay_dark"></div>').css({left:t.left+"px",top:t.top+"px",width:a.w+.1+"px",height:a.h+.1+"px"}).appendTo("body"),$('<div class="crop_overlay_light" style="background: transparent url('+e.attr("src")+") no-repeat -"+n.cropX*o+"px -"+n.cropY*i+"px; background-size: "+a.w+"px "+a.h+'px;"></div>').css({left:t.left+n.cropX*o+"px",top:t.top+n.cropY*i+"px",width:n.cropW*o+"px",height:n.cropH*i+"px"}).appendTo("body")}}n.isCrop=!n.isCrop}},removeCrop:function(){$(".crop_overlay_dark").remove(),$(".crop_overlay_light").remove(),n.isCrop=!1},showNude:function(){var e=$("#mainImage");return!!e.length&&(e.removeClass("nudePreview").addClass("animated fadeIn"),"undefined"!=typeof e.data("isAllowedNude")&&e.addClass("blur"),e.attr("src",e.data("phPath")+e.data("idPhoto")+"_mobile.jpg").css({width:"auto",height:"auto"}),n.updateMainImg(),n.viewedNudes.push(e.data("idPhoto")),!0)},updateMainImg:function(){var e=$("#mainImage");if(e.length){if("nudePreview"==e.attr("class"))for(var t=0;t<n.viewedNudes.length;t++)if(e.data("idPhoto")==n.viewedNudes[t]){e.removeClass("nudePreview"),"undefined"!=typeof e.data("isAllowedNude")&&e.addClass("blur"),e.attr("src",e.data("phPath")+e.data("idPhoto")+"_mobile.jpg").css({width:"auto",height:"auto"});break}var a=e.attr("src"),o="main";if("undefined"!=typeof e.data("isAllowedNude")&&(o="council"),n.winW>=420){var i=$("#mobileImage");i.attr("src",a.replace(/mobile/g,o)),i.waitForImages(function(){e.attr("src",a.replace(/mobile/g,o))})}else e.attr("src",a.replace(new RegExp(o,"g"),"mobile"));var r=e.data("phMainW"),l=e.data("phMainH");r>n.winW&&(l=l/r*n.winW,r=n.winW),e.css({width:r+"px",height:l+"px"}),n.resetImgZoom(),n.fixCommText()}},resetImgZoom:function(){if(!n.isInZoom)return!0;var e=$("#mainImage");n.isInZoom=!1,e.panzoom("reset",{duration:500}),setTimeout(function(){e.panzoom("destroy")},500)},handleImgZoom:function(){if(!o.utils.isTouch()||n.isCrop)return!0;if(n.isInZoom)n.resetImgZoom();else{var e=$("#mainImage");n.winW<420&&e.attr("src",e.attr("src").replace(/mobile/g,"main"));var t=e.data("phMainW")/e.width();if(t<=1)return!0;n.isInZoom=!0,e.panzoom({minScale:t,maxScale:t,duration:500,contain:"invert"}),e.panzoom("zoom")}},submitLogin:function(){var e=o.utils.trim($("#auth_login").val()),t=o.utils.trim($("#auth_pass").val());if(""!=e&&""!=t){var a=location.href.replace(/&wrn_login=1/,"");""!=window.location.search||o.utils.endsWith(a,"?")||(a+="?"),a+="&auth_login="+encodeURI(e)+"&auth_pass="+encodeURI(t),location.href=a}},emoticon:function(e){var t=$("#commText"),a=t.val();o.utils.trim(a)&&(a+="\n"),a+="[b]"+$("#authName"+e).text()+"[/b], ",t.focus().val("").val(a).css({height:"100px"})},fixCommText:function(){n.winW<400&&$(".commText").css({width:n.winW-60+"px"})},fixLayout:function(){n.winW=o.utils.winW(),n.winH=o.utils.winH(),o.utils.info("winW: "+n.winW+", winH: "+n.winH),n.updateMainImg(),n.removeCrop()}};t.app=n},function(e,t,a){"use strict";a(5)},function(e,t,a){"use strict";var o=a(0),n=a(1),i=a(2);$(function(){o.utils.handleHistory('a[rel="prev"], a[rel="next"], a[rel="author"]',n.ajax.ajaxFld),$(window).resize(function(){(0,o.waitForFinalEvent)(function(){i.app.fixLayout()},500,"delayed_resize")}),$(document).on("click","#loginBtn",function(e){i.app.submitLogin(),e.preventDefault()}).on("click","#menuLnk",function(){i.app.removeCrop(),$("#submenu").slideToggle(200,function(){})}).on("click",".crop_overlay_dark, .crop_overlay_light",function(){i.app.removeCrop()}).on("click","#addRecBtn",function(e){n.ajax.getRecs(),e.preventDefault()}).on("click","#fineartBtn",function(e){n.ajax.getFineart(),e.preventDefault()}).on("click","#homeAlbumBtn",function(e){confirm(o.ploc.really_do_home_album_loc)&&n.ajax.getHomeAlbum(),e.preventDefault()}).on("click","#addCommBtn",function(e){n.ajax.postComm(),e.preventDefault()}).on("click","#followBtn, #unfollowBtn",function(e){"followBtn"==$(this).attr("id")?n.ajax.getFollow(1):n.ajax.getFollow(0),e.preventDefault()}).on("click",".nudePreview",function(e){i.app.showNude()&&(e.stopPropagation(),e.preventDefault())}).on("click",".authNameAnswer",function(e){i.app.emoticon($(this).data("idAuth")),e.stopPropagation(),e.preventDefault()}).on("click",".cropClick",function(e){var t=$(this).data("cropCoordinates").split(";");4==t.length&&(i.app.cropX=t[0],i.app.cropY=t[1],i.app.cropW=t[2],i.app.cropH=t[3],i.app.toggleCrop()),e.stopPropagation(),e.preventDefault()}).on("click","#canonicalUrl",function(){o.cookie.setCookie("allowFullVer",1)}).on("click","#commText",function(){$(this).css({height:"100px"})}).on("doubletap","#mainImageA",function(e){i.app.handleImgZoom(),e.preventDefault()}).on("dblclick","#mainImageA",function(e){e.preventDefault()}).on("click","#mainImageA",function(e){i.app.clicksCnt++,1===i.app.clicksCnt?i.app.clickTimer=setTimeout(function(){i.app.clicksCnt=0,i.app.isInZoom||$("#nextLnkKey").trigger("click"),e.preventDefault()},i.app.clickDelay):(clearTimeout(i.app.clickTimer),i.app.handleImgZoom(),e.preventDefault(),i.app.clicksCnt=0)}).on("keyup",function(e){39==e.keyCode?$("#nextLnkKey").click():37==e.keyCode&&$("#prevLnkKey").click(),e.preventDefault()}),setTimeout(function(){$("#resultMsg").slideUp()},3e3),i.app.updateMainImg(),n.ajax.getViews(),o.utils.rotateVal($("#authRating"),"float")})},function(e,t){},function(e,t,a){a(4),e.exports=a(3)}]);